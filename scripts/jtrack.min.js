/*! jtrack 2014-10-16 */
var jtrackOp=[];!function(jQuery){function _def(a){return"undefined"!=typeof a}function _eval(ele,obj){if("function"==typeof obj)obj=obj(ele);else try{obj=eval("("+obj+"(ele));")}catch(err){}return obj!==!1?obj:void 0}function _d(a){return _def(window.console)&&_def(window.console.debug)&&window.console.debug(a)}function dump(a,b,c){var d,e,f,g,h;for(d="",b||(b=3),c||(c=0),e="",f=0;c+1>f;f++)e+="	";if("object"==typeof a){if(b>=c)for(g in a)h=a[g],"object"==typeof h?(d+=e+"'"+g+"' ...\n",d+=dump(h,b,c+1)):d+=e+"'"+g+"' => \""+h+'"\n'}else d="===>"+a+"<===("+typeof a+")";return d}jQuery.jtrack=function(a){var b,c,d={};jQuery.isPlainObject(a)?(b=jQuery.extend({},{debug:!1,clearCampaignUrls:!0,domainName:window.location.host},a),c=b.domainName,_def(b.analytics)?(jQuery.jtrack.defaultsettings=jQuery.extend({},jQuery.jtrack.defaultsettings,b.analytics.defaults),jQuery.jtrack.accounts=b.analytics.accounts,jQuery.fn.trackPage(function(a,b){"undefined"!==a&&(jQuery.isPlainObject(a)?jQuery.each(a,function(a,d){_d("appling: "+d.element+" for scope "+b);var e=d.element.replace("**SELF_DOMAIN**",c);jQuery(e).jtrack(_def(d.options)?d.options:null,b)}):jQuery.ajax({dataType:"jsonp",url:a,success:function(a){jQuery.each(a,function(a,d){_d("appling: "+d.element+" for scope "+b);var e=d.element.replace("**SELF_DOMAIN**",c);jQuery(e).jtrack(_def(d.options)?d.options:null,b)})}}))})):_def(b.events)&&jQuery.each(b.events,function(a,b){var d=b.element.replace("**SELF_DOMAIN**",c);jQuery(d).jtrack(_def(b.options)?b.options:null)}),b.clearCampaignUrls&&jQuery.jtrack.clearCampaignUrl()):(d=jtrackOp[a],d.ele.triggerHandler(d.tasactedEvent))},jQuery.jtrack.defaults={debug:!1},jQuery.jtrack.eventdefaults={mode:"event",category:function(a){return a[0].hostname===location.hostname?"internal":"external"},action:function(a){return"undefined"!=typeof a.attr("alt")?a.attr("alt"):""},label:function(a){return"undefined"!=typeof a.text()?a.attr("href"):""},value:function(a){return"undefined"!=typeof a.text()?a.text():""},eventTracked:"click",skip_internal:!1,overwrites:!0,skip_campaign:!1,alias:null,nonInteraction:null,callback:function(){}},jQuery.jtrack.accounts={},jQuery.jtrack.settings={},jQuery.jtrack.defaultsettings={namedSpace:!1,cookieName:!1,cookieDomain:window.location.host,cookieExpires:!1,cookiePath:"/",autoLink:!0,autoLinkDomains:[],dimension:[],metrics:[],location:null,hostname:null,experimentID:null,expVar:null,sampleRate:!1,displayfeatures:!1,ecommerce:!1,linkid:!0,events:!1},jQuery.jtrack.init_analytics=function(a){_d("Google Analytics loaded"),jQuery.each(jQuery.jtrack.accounts,function(b,c){var d,e,f,g,h,i,j,k;jQuery.jtrack.settings=jQuery.extend({},jQuery.jtrack.defaultsettings,c.settings),d=jQuery.jtrack.settings,e=d.namedSpace?{name:d.namedSpace}:{},f=jQuery.isPlainObject(e)?e.name+".":"",g=d.cookiePath?{cookiePath:d.cookiePath}:{},h=d.cookieDomain?{cookieDomain:d.cookieDomain}:{},i=d.autoLink?{allowLinker:!0}:{},j=d.sampleRate?{sampleRate:d.sampleRate}:{},k=$.extend({},e,h,g,i,j),ga("create",c.id,k=={}?"auto":k),null!==d.location&&ga(f+"set","location",d.location),null!==d.hostname&&ga(f+"set","hostname",d.hostname),null!==d.experimentID&&(ga(f+"set","expId",d.experimentID),ga(f+"set","expVar",d.expVar)),d.dimension.length>0&&jQuery.each(d.dimension,function(a,b){ga(f+"set",b.name,b.val)}),d.metrics.length>0&&jQuery.each(d.metrics,function(a,b){ga(f+"set",b.name,b.val)}),i!={}&&(ga(f+"require","linker"),d.autoLinkDomains.length>0&&ga(f+"linker:autoLink",d.autoLinkDomains)),d.linkid&&ga(f+"require","linkid","linkid.js"),d.displayfeatures&&ga(f+"require","displayfeatures"),ga(f+"send","pageview"),d.ecommerce&&ga(f+"require","ecommerce"),jQuery.isFunction(a)&&d.events!==!1&&ga(function(){a(d.events,f)})})},jQuery.jtrack.load_script=function(a){!function(b,c,d,e,f,g,h){b.GoogleAnalyticsObject=f,b[f]=b[f]||function(){(b[f].q=b[f].q||[]).push(arguments)},b[f].l=1*new Date,g=c.createElement(d),h=c.getElementsByTagName(d)[0],g.async=1,g.src=e,h.parentNode.insertBefore(g,h),jQuery.jtrack.init_analytics(a)}(window,document,"script","//www.google-analytics.com/analytics.js","ga")},jQuery.fn.trackPage=function(a){"undefined"!=typeof ga&&ga.length>0?_d("!!!!!! Google Analytics loaded previously !!!!!!!"):jQuery.jtrack.settings.onload===!0||null===jQuery.jtrack.settings.onload?jQuery(document).ready(function(){jQuery.jtrack.load_script(a)}):jQuery.jtrack.load_script(a)},jQuery.jtrack.trackEvent=function(a,b,c,d,e,f,g){if(_def(ga)){var h,i,j,k;h=null!==c?{eventCategory:c}:{},i=null!==d?{eventAction:d}:{},j=null!==e?{eventLabel:e}:{},k=null!==f?{eventValue:f}:{},ga(b+"send","event",jQuery.extend({},h,i,j,k)),"undefined"!=typeof g&&(jQuery.isFunction(g)?g(a):_eval(a,g)),_d("Fired "+b+"send for Tracking")}else _d("FATAL: ga is not defined")},jQuery.jtrack.trackSocial=function(a,b,c,d,e){if(_def(ga)){var f,g,h;f=null!==c?{socialNetwork:c}:{},g=null!==d?{socialAction:d}:{},h=null!==e?{socialTarget:e}:{},ga(b+"send","social",jQuery.extend({},f,g,h)),_d("Fired "+b+"send for Social Tracking")}else _d("FATAL: ga is not defined")},jQuery.jtrack.trackPageview=function(a,b){_def(a)?(a._trackPageview(b),_d("Fired event for _trackPageview for "+b)):_d("FATAL: pageTracker is not defined")},jQuery.jtrack.hit=function(a,b,c,d){if(_def(ga)){var e,f;e=null!==c?{hitType:c}:{},f=null!==d?{page:d}:{},ga(b+"send",jQuery.extend({},e,f)),_d("Fired "+b+"send for hitType Tracking")}else _d("FATAL: ga is not defined")},jQuery.jtrack.make_campaign_str=function(a){function b(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null}function c(){var a={},c=b("__utmz");if(c){var d=c.split(".");if(d.length>=4){var e=d[4].split("|"),f=0;for(f=0;f<e.length;f++){var g=e[f].split("=");a[g[0]]=g[1]}}}return a}var d=c(),e=null,f="";return 0!==d.length&&"undefined"!==d.utmccn&&"(direct)"!==d.utmccn&&"(referral)"!==d.utmccn&&"undefined"!==d.utmcsr&&"(direct)"!==d.utmcsr&&"(referral)"!==d.utmcsr?("undefined"!==d.utmcsr&&(f+="utm_source="+d.utmcsr),"undefined"!==d.utmcmd&&(f+="&utm_medium="+d.utmcmd),"undefined"!==d.utmccn&&(f+="&utm_campaign="+d.utmccn),"undefined"!==d.utmctr&&(f+="&utm_term="+d.utmctr),"undefined"!==d.utmccn&&(f+="&utm_content="+d.utmccn)):(e="undefined"!==d.utmcsr?d.utmcsr:"",f+="utm_source="+window.location.host.split(".").join("-")+"&utm_medium=online&utm_campaign="+window.location.host.split(".").join("-")+"-"+e+"&utm_term=&utm_content="),"utm_source=undefined&utm_medium=undefined&utm_campaign=undefined&utm_term=undefined&utm_content=undefined"===f&&(e="undefined"!==d.utmcsr?d.utmcsr:"",f="utm_source="+window.location.host.split(".").join("-")+"&utm_medium=online&utm_campaign="+window.location.host.split(".").join("-")+"-"+e+"&utm_term=&utm_content="),jQuery.isFunction(a)?(a(f),!1):f},jQuery.jtrack.make_forced_camp=function(a,b){if(b.indexOf("_link")>-1&&"added"!==a.data("tracker")){var c=a.attr("href"),d=jQuery.jtrack.make_campaign_str();_d(d+" of campaign"),""!==d&&-1===window.location.toString().indexOf("inquiry?")&&-1===c.indexOf("utm_campaign")&&(a.attr("href",c+(c.indexOf("?")>-1?"&":"?")+d),_d(a.attr("href")+" of camp"),a.data("tracker","added"))}},jQuery.jtrack.clearCampaignUrl=function(){var a=window.location.href;if(a.indexOf("utm_source=")>-1){var b=a.split(window.location.host)[1];b=a.split("?")[0],window.history.pushState(null,jQuery(document).find("title").text(),b)}},jQuery.fn.jtrack=function(a,b){return jQuery.each(jQuery(this),function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return c=jQuery(this),d=jQuery.extend({},jQuery.jtrack.eventdefaults,a),e=_eval(c,d.overwrites),e="undefined"===e?"true":e,c.is(".tracked")&&"false"===e?!1:(c.addClass("tracked"),f=d.mode,g=_eval(c,d.alias),h=_eval(c,d.category),i=_eval(c,d.action),j=_eval(c,d.eventTracked),i=""===i?j:i,k=_eval(c,d.label),l=_eval(c,d.value),l=isNaN(l)?1:l,m=_eval(c,d.skip_internal),n=_eval(c,d.skip_campaign),o=d._link,p=d.nonInteraction,q=d.callback,c.attr("role",j+"_"+i+"_"+h),r=j+"."+("undefined"===g||null===g?"jtrack":g),s=m&&c[0].hostname===location.hostname,_d(s?"Skipping ":"Tracking "),t="undefined"===g||null===g?j:g,jtrackOp[t]=[],jtrackOp[t].ele=c,jtrackOp[t].tasactedEvent=r,"true"===e&&(c.off(r),c.unbind(r),_d("overwriting "+r)),_d("setting event "+r),c.on(r,function(a){return null!==p&&ga("set","nonInteraction",p),_d("doing event "+r),f.indexOf("_link")>-1&&(a.preventDefault(),a.stopPropagation(),n||jQuery.jtrack.make_forced_camp(c,f)),!s&&f.indexOf("event")>-1&&jQuery.jtrack.trackEvent(c,b,h,i,k,l,q),f.indexOf("_social")>-1&&(u=_eval(c,d.network),v=_eval(c,d.socialAction),jQuery.jtrack.trackSocial(c,b,u,v)),f.indexOf("_link")>-1&&(_d("Fired _link for Tracking for _link"),_d(c.attr("href"))),!0}),void 0)})}}(jQuery);