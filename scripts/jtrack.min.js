/*! jtrack 2014-10-15 */
var pageTracker=null,_gaq=_gaq||[],jtrackedOptions=[];!function(jQuery){function defined(a){return"undefined"!=typeof a}function evaluate(ele,obj){if("function"==typeof obj)obj=obj(ele);else try{obj=eval("("+obj+"(ele));")}catch(err){}return obj!==!1?obj:void 0}function debug(a){return defined(jQuery.jtrack)&&jQuery.jtrack.defaults.debug&&defined(window.console)&&defined(window.console.debug)&&window.console.debug(a)}function dump(a,b,c){var d,e,f,g,h;for(d="",b||(b=3),c||(c=0),e="",f=0;c+1>f;f++)e+="	";if("object"==typeof a){if(b>=c)for(g in a)h=a[g],"object"==typeof h?(d+=e+"'"+g+"' ...\n",d+=dump(h,b,c+1)):d+=e+"'"+g+"' => \""+h+'"\n'}else d="===>"+a+"<===("+typeof a+")";return d}jQuery.jtrack=function(a){var b={};if(jQuery.isPlainObject(a)){var c=jQuery.extend({},{debug:!1,clearCampaignUrls:!0,domainName:window.location.host},a),d=c.domainName;defined(c.analytics)?(jQuery.jtrack.defaultsettings=jQuery.extend({},jQuery.jtrack.defaultsettings,c.analytics.defaults),jQuery.jtrack.accounts=c.analytics.accounts,jQuery.fn.trackPage(function(a){defined(c.events)&&(jQuery.isPlainObject(c.events)?jQuery.each(c.events,function(b,c){debug("appling: "+c.element);var e=c.element.replace("**SELF_DOMAIN**",d);jQuery(e).jtrack(defined(c.options)?c.options:null,a)}):jQuery.ajax({dataType:"jsonp",url:c.events,success:function(b){jQuery.each(b,function(b,c){debug("appling: "+c.element);var e=c.element.replace("**SELF_DOMAIN**",d);jQuery(e).jtrack(defined(c.options)?c.options:null,a)})}}))})):defined(c.events)&&jQuery.each(c.events,function(a,b){var c=b.element.replace("**SELF_DOMAIN**",d);jQuery(c).jtrack(defined(b.options)?b.options:null)}),c.clearCampaignUrls&&jQuery.jtrack.clearCampaignUrl()}else b=jtrackedOptions[a],b.ele.triggerHandler(b.tasactedEvent)},jQuery.jtrack.defaults={debug:!1},jQuery.jtrack.eventdefaults={mode:"event",category:function(a){return a[0].hostname===location.hostname?"internal":"external"},action:function(a){return"undefined"!=typeof a.attr("alt")?a.attr("alt"):""},label:function(a){return"undefined"!=typeof a.text()?a.attr("href"):""},value:function(a){return"undefined"!=typeof a.text()?a.text():""},eventTracked:"click",skip_internal:!1,overwrites:!0,skip_campaign:!1,alias:null,nonInteraction:null,callback:function(){}},jQuery.jtrack.accounts={},jQuery.jtrack.settings={},jQuery.jtrack.defaultsettings={namedSpace:!1,cookieName:!1,cookieDomain:window.location.host,cookieExpires:!1,cookiePath:"/",autoLink:!0,autoLinkDomains:[],dimension:[],metrics:[],location:null,hostname:null,experimentID:null,expVar:null,sampleRate:!1,displayfeatures:!1,ecommerce:!1,linkid:!0},jQuery.jtrack.init_analytics=function(a){debug("Google Analytics loaded"),jQuery.each(jQuery.jtrack.accounts,function(b,c){jQuery.jtrack.settings=jQuery.extend({},jQuery.jtrack.defaultsettings,c.settings),namedSpace=jQuery.jtrack.settings.namedSpace?{name:jQuery.jtrack.settings.namedSpace}:{},ns=jQuery.isPlainObject(namedSpace)?namedSpace.name+".":"",cookiePath=jQuery.jtrack.settings.cookiePath?{cookiePath:jQuery.jtrack.settings.cookiePath}:{},cookieDomain=jQuery.jtrack.settings.cookieDomain?{cookieDomain:jQuery.jtrack.settings.cookieDomain}:{},autoLink=jQuery.jtrack.settings.autoLink?{allowLinker:!0}:{},sampleRate=jQuery.jtrack.settings.sampleRate?{sampleRate:jQuery.jtrack.settings.sampleRate}:{},opt=$.extend({},namedSpace,cookieDomain,cookiePath,autoLink,sampleRate),ga("create",c.id,opt=={}?"auto":opt),null!==jQuery.jtrack.settings.location&&ga(ns+"set","location",jQuery.jtrack.settings.location),null!==jQuery.jtrack.settings.hostname&&ga(ns+"set","hostname",jQuery.jtrack.settings.hostname),null!==jQuery.jtrack.settings.experimentID&&(ga(ns+"set","expId",jQuery.jtrack.settings.experimentID),ga(ns+"set","expVar",jQuery.jtrack.settings.expVar)),jQuery.jtrack.settings.dimension.length>0&&jQuery.each(jQuery.jtrack.settings.dimension,function(a,b){ga(ns+"set",b.name,b.val)}),jQuery.jtrack.settings.metrics.length>0&&jQuery.each(jQuery.jtrack.settings.metrics,function(a,b){ga(ns+"set",b.name,b.val)}),autoLink!={}&&(ga(ns+"require","linker"),jQuery.jtrack.settings.autoLinkDomains.length>0&&ga(ns+"linker:autoLink",jQuery.jtrack.settings.autoLinkDomains)),jQuery.jtrack.settings.linkid&&ga(ns+"require","linkid","linkid.js"),jQuery.jtrack.settings.displayfeatures&&ga(ns+"require","displayfeatures"),ga(ns+"send","pageview"),jQuery.jtrack.settings.ecommerce&&ga(ns+"require","ecommerce"),jQuery.isFunction(a)&&ga(function(){a(ns)})})},jQuery.jtrack.load_script=function(a){!function(b,c,d,e,f,g,h){b.GoogleAnalyticsObject=f,b[f]=b[f]||function(){(b[f].q=b[f].q||[]).push(arguments)},b[f].l=1*new Date,g=c.createElement(d),h=c.getElementsByTagName(d)[0],g.async=1,g.src=e,h.parentNode.insertBefore(g,h),jQuery.jtrack.init_analytics(a)}(window,document,"script","//www.google-analytics.com/analytics.js","ga")},jQuery.fn.trackPage=function(a){"undefined"!=typeof ga&&ga.length>0?debug("!!!!!! Google Analytics loaded previously !!!!!!!"):jQuery.jtrack.settings.onload===!0||null===jQuery.jtrack.settings.onload?jQuery(document).ready(function(){jQuery.jtrack.load_script(a)}):jQuery.jtrack.load_script(a)},jQuery.jtrack.trackEvent=function(a,b,c,d,e,f,g){if(defined(ga)){var h,i,j,k;h=null!==c?{eventCategory:c}:{},i=null!==d?{eventAction:d}:{},j=null!==e?{eventLabel:e}:{},k=null!==f?{eventValue:f}:{},ga(b+"send","event",jQuery.extend({},h,i,j,k)),"undefined"!=typeof g&&(jQuery.isFunction(g)?g(a):evaluate(a,g)),debug("Fired "+b+"send for Tracking")}else debug("FATAL: ga is not defined")},jQuery.jtrack.trackSocial=function(a,b,c,d,e){if(defined(ga)){var f,g,h;f=null!==c?{socialNetwork:c}:{},g=null!==d?{socialAction:d}:{},h=null!==e?{socialTarget:e}:{},ga(b+"send","social",jQuery.extend({},f,g,h)),debug("Fired "+b+"send for Social Tracking")}else debug("FATAL: ga is not defined")},jQuery.jtrack.trackPageview=function(a,b){defined(a)?(a._trackPageview(b),debug("Fired event for _trackPageview for "+b)):debug("FATAL: pageTracker is not defined")},jQuery.jtrack.hit=function(a,b,c,d){if(defined(ga)){var e,f;e=null!==c?{hitType:c}:{},f=null!==d?{page:d}:{},ga(b+"send",jQuery.extend({},e,f)),debug("Fired "+b+"send for hitType Tracking")}else debug("FATAL: ga is not defined")},jQuery.jtrack.make_campaign_str=function(a){function b(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null}function c(){var a={},c=b("__utmz");if(c){var d=c.split(".");if(d.length>=4){var e=d[4].split("|"),f=0;for(f=0;f<e.length;f++){var g=e[f].split("=");a[g[0]]=g[1]}}}return a}var d=c(),e=null,f="";return 0!==d.length&&"undefined"!==d.utmccn&&"(direct)"!==d.utmccn&&"(referral)"!==d.utmccn&&"undefined"!==d.utmcsr&&"(direct)"!==d.utmcsr&&"(referral)"!==d.utmcsr?("undefined"!==d.utmcsr&&(f+="utm_source="+d.utmcsr),"undefined"!==d.utmcmd&&(f+="&utm_medium="+d.utmcmd),"undefined"!==d.utmccn&&(f+="&utm_campaign="+d.utmccn),"undefined"!==d.utmctr&&(f+="&utm_term="+d.utmctr),"undefined"!==d.utmccn&&(f+="&utm_content="+d.utmccn)):(e="undefined"!==d.utmcsr?d.utmcsr:"",f+="utm_source="+window.location.host.split(".").join("-")+"&utm_medium=online&utm_campaign="+window.location.host.split(".").join("-")+"-"+e+"&utm_term=&utm_content="),"utm_source=undefined&utm_medium=undefined&utm_campaign=undefined&utm_term=undefined&utm_content=undefined"===f&&(e="undefined"!==d.utmcsr?d.utmcsr:"",f="utm_source="+window.location.host.split(".").join("-")+"&utm_medium=online&utm_campaign="+window.location.host.split(".").join("-")+"-"+e+"&utm_term=&utm_content="),jQuery.isFunction(a)?(a(f),!1):f},jQuery.jtrack.make_forced_camp=function(a,b){if(b.indexOf("_link")>-1&&"added"!==a.data("tracker")){var c=a.attr("href"),d=jQuery.jtrack.make_campaign_str();debug(d+" of campaign"),""!==d&&-1===window.location.toString().indexOf("inquiry?")&&-1===c.indexOf("utm_campaign")&&(a.attr("href",c+(c.indexOf("?")>-1?"&":"?")+d),debug(a.attr("href")+" of camp"),a.data("tracker","added"))}},jQuery.jtrack.clearCampaignUrl=function(){var a=window.location.href;if(a.indexOf("utm_source=")>-1){var b=a.split(window.location.host)[1];b=a.split("?")[0],window.history.pushState(null,jQuery(document).find("title").text(),b)}},jQuery.fn.jtrack=function(a,b){return jQuery.each(jQuery(this),function(){var c=jQuery(this),d=jQuery.extend({},jQuery.jtrack.eventdefaults,a),e=evaluate(c,d.overwrites);if(e="undefined"===e?"true":e,c.is(".tracked")&&"false"===e)return!1;c.addClass("tracked");var f=d.mode,g=evaluate(c,d.alias),h=evaluate(c,d.category),i=evaluate(c,d.action),j=evaluate(c,d.eventTracked);i=""===i?j:i;var k=evaluate(c,d.label),l=evaluate(c,d.value);l=isNaN(l)?1:l;var m=evaluate(c,d.skip_internal),n=evaluate(c,d.skip_campaign),o=(d._link,d.nonInteraction),p=d.callback;c.attr("role",j+"_"+i+"_"+h);var q=j+"."+("undefined"===g||null===g?"jtrack":g),r=m&&c[0].hostname===location.hostname,s="undefined"===g||null===g?j:g;jtrackedOptions[s]=[],jtrackedOptions[s].ele=c,jtrackedOptions[s].tasactedEvent=q,"true"===e&&(c.off(q),c.unbind(q),debug("overwriting "+q)),debug("setting event "+q),c.on(q,function(a){if(null!==o&&ga("set","nonInteraction",o),debug("doing event "+q),f.indexOf("_link")>-1&&(a.preventDefault(),a.stopPropagation(),n||jQuery.jtrack.make_forced_camp(c,f)),!r&&f.indexOf("event")>-1&&jQuery.jtrack.trackEvent(c,b,h,i,k,l,p),f.indexOf("_social")>-1){var e=evaluate(c,d.network),g=evaluate(c,d.socialAction);jQuery.jtrack.trackSocial(c,b,e,g)}return f.indexOf("_link")>-1&&(debug("Fired _link for Tracking for _link"),debug(c.attr("href"))),!0})})}}(jQuery);